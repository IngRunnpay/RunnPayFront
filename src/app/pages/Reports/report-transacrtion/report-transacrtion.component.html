<ngx-spinner>
    <app-spinner></app-spinner>
</ngx-spinner>
<div class="card">
    <div class="font-semibold text-xl mb-4">Transactions</div>
    <p-table #dt1 [value]="DataReport" dataKey="id" [rows]="15" [rowHover]="true" [showGridlines]="true"
        [paginator]="false" responsiveLayout="scroll">
        <ng-template #caption>
            <div>
                <input type="text" pInputText [(ngModel)]="reportsService.requestReportTransaction.idTransaccion"
                    style="margin: 2px;" placeholder="Transaction ID" />
                <input type="text" pInputText [(ngModel)]="reportsService.requestReportTransaction.referencia"
                    style="margin: 2px;" placeholder="Reference" />
                <input type="text" pInputText [(ngModel)]="reportsService.requestReportTransaction.documento"
                    style="margin: 2px;" placeholder="Document" />
                <p-datepicker [(ngModel)]="reportsService.requestReportTransaction.fechaInicio" [iconDisplay]="'input'"
                    [showIcon]="true" inputId="icondisplay" placeholder="Start date" />
                <p-datepicker [(ngModel)]="reportsService.requestReportTransaction.fechaFin" [iconDisplay]="'input'"
                    [showIcon]="true" inputId="icondisplay" placeholder="End date" />
            </div>

            <div class="flex justify-between items-center flex-col sm:flex-row">
                <div class="flex ">
                    <button pButton label="Clean" class="p-button-outlined mb-2" icon="pi pi-filter-slash"
                        (click)="clear()" style="margin: 2px;"></button>
                    <button pButton label="Look for" class="p-button-outlined mb-2" icon="pi pi-search"
                        (click)="GetData()" style="margin: 2px;"></button>
                </div>
                <button pButton class="p-button-outlined mb-2" icon="pi pi-file-excel"
                    style="margin: 2px; color: #258a47; border-color:#258a47 ;" (click)="Excel()"></button>
            </div>

        </ng-template>
        <ng-template #header>
            <tr>
                <th style="min-width: 12rem">
                    <div class="flex justify-between items-center">
                        Id transacción
                    </div>
                </th>
                <th style="min-width: 12rem">
                    <div class="flex justify-between items-center">
                        Pago
                    </div>
                </th>
                <th style="min-width: 14rem">
                    <div class="flex justify-between items-center">
                        Estado
                    </div>
                </th>
                <th style="min-width: 10rem">
                    <div class="flex justify-between items-center">
                        Referencia
                    </div>
                </th>
                <th style="min-width: 10rem">
                    <div class="flex justify-between items-center">
                        Monto
                    </div>
                </th>
                <th style="min-width: 10rem">
                    <div class="flex justify-between items-center">
                        Moneda
                    </div>
                </th>
                <th style="min-width: 12rem">
                    <div class="flex justify-between items-center">
                        Fecha creación
                    </div>
                </th>
                <th style="min-width: 12rem">
                    <div class="flex justify-between items-center">
                        Documento usuario
                    </div>
                </th>
                <th style="min-width: 12rem">
                    <div class="flex justify-between items-center">
                        Nombre usuario
                    </div>
                </th>
            </tr>
        </ng-template>
        <ng-template #body let-customer>
            <tr>
                <td>
                    <span>{{ customer.Idtransaccion }}</span>
                </td>
                <td>
                    <span>{{ customer.MedioPago }}</span>
                </td>
                <td>
                    <p-tag [value]="customer.EstadoTransaccion" [severity]="getSeverity(customer.EstadoTransaccion)" />
                </td>
                <td>
                    {{ customer.Referencia}}
                </td>
                <td>
                    {{ customer.MontoFinal | currency}}
                </td>
                <td>
                    {{ customer.Moneda}}
                </td>
                <td>
                    {{ customer.FechaCreacion | date: 'dd/MM/yyyy HH:mm:ss'}}
                </td>
                <td>
                    {{ customer.UsuDocumento}}

                </td>
                <td>
                    {{ customer.UsuNombre}}
                </td>
            </tr>
        </ng-template>
        <ng-template #emptymessage>
            <tr>
                <td colspan="9">No customers found.</td>
            </tr>
        </ng-template>
        <ng-template #loadingbody>
            <tr>
                <td colspan="9">Loading customers data. Please wait.</td>
            </tr>
        </ng-template>
    </p-table>
    <div class="col-6">
        <p-paginator (onPageChange)="PageChange($event)"
            [first]="(reportsService.contentData.pageNumber - 1) * reportsService.contentData.pageSize"
            [rows]="reportsService.contentData.pageSize" [totalRecords]="totalPa" [rowsPerPageOptions]="[15, 30, 45]" />
    </div>
</div>