import{a as K,b as Q,c as X,d as Y,e as Z,f as $,g as ee,h as te}from"./chunk-V4PN4SSU.js";import{b as U,c as A,d as J}from"./chunk-PUEQT65G.js";import"./chunk-BLGMMSK4.js";import"./chunk-NYZJVUQL.js";import{a as H}from"./chunk-NASMAREG.js";import"./chunk-YC4BVXEL.js";import"./chunk-2LJKBWPB.js";import"./chunk-Z7NZSH4E.js";import{b as B,d as z,e as j,f as G}from"./chunk-DWL2YNNS.js";import{c as L,f as O}from"./chunk-CVT3DHCO.js";import{a as q,c as V}from"./chunk-7P4TUMCW.js";import{Ea as F,Ha as N,La as W,Qa as k}from"./chunk-Q64Y3S2B.js";import{$b as S,Bc as P,Ha as s,Hb as o,Ib as R,Jb as u,Lb as h,Mb as f,Na as _,Nb as v,Pb as D,Ta as C,W as m,X as d,Ya as y,Yb as w,Zb as b,_b as E,eb as g,nb as t,ob as r,pb as M,tb as x,vb as T,wb as l,zc as I}from"./chunk-RFJ67CCU.js";import"./chunk-4CLCTAJ7.js";var ne=()=>[15,30,45];function oe(c,a){if(c&1){let e=x();t(0,"div")(1,"input",11),v("ngModelChange",function(i){m(e);let p=l();return f(p.reportsService.requestReportTransaction.idTransaccion,i)||(p.reportsService.requestReportTransaction.idTransaccion=i),d(i)}),r(),t(2,"input",12),v("ngModelChange",function(i){m(e);let p=l();return f(p.reportsService.requestReportTransaction.referencia,i)||(p.reportsService.requestReportTransaction.referencia=i),d(i)}),r(),t(3,"input",13),v("ngModelChange",function(i){m(e);let p=l();return f(p.reportsService.requestReportTransaction.documento,i)||(p.reportsService.requestReportTransaction.documento=i),d(i)}),r(),t(4,"p-datepicker",14),v("ngModelChange",function(i){m(e);let p=l();return f(p.reportsService.requestReportTransaction.fechaInicio,i)||(p.reportsService.requestReportTransaction.fechaInicio=i),d(i)}),r(),t(5,"p-datepicker",15),v("ngModelChange",function(i){m(e);let p=l();return f(p.reportsService.requestReportTransaction.fechaFin,i)||(p.reportsService.requestReportTransaction.fechaFin=i),d(i)}),r()(),t(6,"div",16)(7,"div",17)(8,"button",18),T("click",function(){m(e);let i=l();return d(i.clear())}),r(),t(9,"button",19),T("click",function(){m(e);let i=l();return d(i.GetData())}),r()()()}if(c&2){let e=l();s(),h("ngModel",e.reportsService.requestReportTransaction.idTransaccion),s(),h("ngModel",e.reportsService.requestReportTransaction.referencia),s(),h("ngModel",e.reportsService.requestReportTransaction.documento),s(),h("ngModel",e.reportsService.requestReportTransaction.fechaInicio),g("iconDisplay","input")("showIcon",!0),s(),h("ngModel",e.reportsService.requestReportTransaction.fechaFin),g("iconDisplay","input")("showIcon",!0)}}function ae(c,a){c&1&&(t(0,"tr")(1,"th",20)(2,"div",21),o(3," Id transacci\xF3n "),r()(),t(4,"th",20)(5,"div",21),o(6," Pago "),r()(),t(7,"th",22)(8,"div",21),o(9," Estado "),r()(),t(10,"th",23)(11,"div",21),o(12," Referencia "),r()(),t(13,"th",23)(14,"div",21),o(15," Monto "),r()(),t(16,"th",23)(17,"div",21),o(18," Moneda "),r()(),t(19,"th",20)(20,"div",21),o(21," Fecha creaci\xF3n "),r()(),t(22,"th",20)(23,"div",21),o(24," Documento usuario "),r()(),t(25,"th",20)(26,"div",21),o(27," Nombre usuario "),r()()())}function se(c,a){if(c&1&&(t(0,"tr")(1,"td")(2,"span"),o(3),r()(),t(4,"td")(5,"span"),o(6),r()(),t(7,"td"),M(8,"p-tag",24),r(),t(9,"td"),o(10),r(),t(11,"td"),o(12),w(13,"formatoDinero"),r(),t(14,"td"),o(15),r(),t(16,"td"),o(17),w(18,"date"),r(),t(19,"td"),o(20),r(),t(21,"td"),o(22),r()()),c&2){let e=a.$implicit,n=l();s(3),R(e.Idtransaccion),s(3),R(e.MedioPago),s(2),g("value",e.EstadoTransaccion)("severity",n.getSeverity(e.EstadoTransaccion)),s(2),u(" ",e.Referencia," "),s(2),u(" ",b(13,10,e.MontoFinal)," "),s(3),u(" ",e.Moneda," "),s(2),u(" ",E(18,12,e.FechaCreacion,"dd/MM/yyyy")," "),s(3),u(" ",e.UsuDocumento," "),s(2),u(" ",e.UsuNombre," ")}}function pe(c,a){c&1&&(t(0,"tr")(1,"td",25),o(2,"No customers found."),r()())}function ce(c,a){c&1&&(t(0,"tr")(1,"td",25),o(2,"Loading customers data. Please wait."),r()())}var re=class c{constructor(a,e,n){this.reportsService=a;this.toast=e;this.authService=n}DataReport=[];totalPa=0;margin="margin: 2px;";ngOnInit(){this.GetData()}GetData(){var a=this.authService.getUserId(),e=this.authService.getApp();this.reportsService.requestReportDispersion.ini=1,this.reportsService.requestReportDispersion.fin=15,this.reportsService.requestReportTransaction.IdUsuario=parseInt(a??"0"),this.reportsService.requestReportTransaction.IdAplicacion=e??"",this.reportsService.GetReportTransaction().subscribe(n=>{n.Respuesta?(this.DataReport=n.Data,this.totalPa=this.DataReport[0].Conteo,this.reportsService.contentData.pageNumber=1):this.toast.error(n.Mensaje)},n=>{this.toast.error("No logramos realizar tu gesti\xF3n, intenta nuevamente.")})}clear(){this.reportsService.requestReportTransaction.ini=1,this.reportsService.requestReportTransaction.fin=15,this.reportsService.requestReportTransaction.idTransaccion=null,this.reportsService.requestReportTransaction.referencia="",this.reportsService.requestReportTransaction.documento="",this.reportsService.requestReportTransaction.fechaInicio=null,this.reportsService.requestReportTransaction.fechaFin=null,this.reportsService.contentData.pageNumber=1,this.reportsService.GetReportTransaction().subscribe(a=>{a.Respuesta?(this.DataReport=a.Data,this.totalPa=this.DataReport[0].Conteo):this.toast.error(a.Mensaje)},a=>{this.toast.error("No logramos realizar tu gesti\xF3n, intenta nuevamente.")})}getSeverity(a){switch(a){case"Aprobado":return"success";case"Rechazado":return"danger";case"Pendiente PSE":case"Pendiente":return"info";default:return"warn"}}PageChange(a){this.reportsService.contentData.pageNumber=a.page+1,this.reportsService.contentData.pageSize=a.rows,this.reportsService.requestReportTransaction.fin=this.reportsService.contentData.pageNumber*this.reportsService.contentData.pageSize,this.reportsService.requestReportTransaction.ini=this.reportsService.requestReportTransaction.fin-this.reportsService.contentData.pageSize,this.reportsService.requestReportTransaction.ini=this.reportsService.requestReportTransaction.ini==0?1:this.reportsService.requestReportTransaction.ini,this.reportsService.GetReportTransaction().subscribe(e=>{e.Respuesta?(this.DataReport=e.Data,this.totalPa=this.DataReport[0].Conteo):this.toast.error(e.Mensaje)},e=>{this.toast.error("No logramos realizar tu gesti\xF3n, intenta nuevamente.")})}static \u0275fac=function(e){return new(e||c)(_(te),_(L),_(O))};static \u0275cmp=C({type:c,selectors:[["app-report-transacrtion"]],decls:17,vars:10,consts:[["dt1",""],["caption",""],["header",""],["body",""],["emptymessage",""],["loadingbody",""],[1,"card"],[1,"font-semibold","text-xl","mb-4"],["dataKey","id","responsiveLayout","scroll",3,"value","rows","rowHover","showGridlines","paginator"],[1,"col-6"],[3,"onPageChange","first","rows","totalRecords","rowsPerPageOptions"],["type","text","pInputText","","placeholder","Id Transaccion",2,"margin","2px",3,"ngModelChange","ngModel"],["type","text","pInputText","","placeholder","Referencia",2,"margin","2px",3,"ngModelChange","ngModel"],["type","text","pInputText","","placeholder","documento",2,"margin","2px",3,"ngModelChange","ngModel"],["inputId","icondisplay","placeholder","Fecha inicio",3,"ngModelChange","ngModel","iconDisplay","showIcon"],["inputId","icondisplay","placeholder","Fecha fin",3,"ngModelChange","ngModel","iconDisplay","showIcon"],[1,"flex","justify-between","items-center","flex-col","sm:flex-row"],[1,"flex"],["pButton","","label","Limpiar","icon","pi pi-filter-slash",1,"p-button-outlined","mb-2",2,"margin","2px",3,"click"],["pButton","","label","Buscar","icon","pi pi-search",1,"p-button-outlined","mb-2",2,"margin","2px",3,"click"],[2,"min-width","12rem"],[1,"flex","justify-between","items-center"],[2,"min-width","14rem"],[2,"min-width","10rem"],[3,"value","severity"],["colspan","9"]],template:function(e,n){if(e&1){let i=x();t(0,"div",6)(1,"div",7),o(2,"Transacciones"),r(),t(3,"p-table",8,0),y(5,oe,10,9,"ng-template",null,1,S)(7,ae,28,0,"ng-template",null,2,S)(9,se,23,15,"ng-template",null,3,S)(11,pe,3,0,"ng-template",null,4,S)(13,ce,3,0,"ng-template",null,5,S),r(),t(15,"div",9)(16,"p-paginator",10),T("onPageChange",function(ie){return m(i),d(n.PageChange(ie))}),r()()()}e&2&&(s(3),g("value",n.DataReport)("rows",15)("rowHover",!0)("showGridlines",!0)("paginator",!1),s(13),g("first",(n.reportsService.contentData.pageNumber-1)*n.reportsService.contentData.pageSize)("rows",n.reportsService.contentData.pageSize)("totalRecords",n.totalPa)("rowsPerPageOptions",D(9,ne)))},dependencies:[K,Z,Y,z,ee,$,V,q,U,P,I,k,F,N,W,B,G,j,H,X,Q,J,A],styles:[".p-datatable-frozen-tbody[_ngcontent-%COMP%], .p-datatable-scrollable[_ngcontent-%COMP%]   .p-frozen-column[_ngcontent-%COMP%]{font-weight:700}"]})};export{re as ReportTransacrtionComponent};
